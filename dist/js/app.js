function app(){function a(){var a={center:g,scrollwheel:!1,zoom:11};e=new google.maps.Map(document.getElementById("map"),a),google.maps.event.addDomListener(window,"resize",function(){var a=e.getCenter();google.maps.event.trigger(e,"resize"),e.setCenter(a)})}function b(a){a.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){a.setAnimation(null)},1400)}function c(){var a=this;a.places=ko.observableArray(l),a.infoWindows=function(c,d){var f=a.places()[c].clicked();f?(q[d].open(e,p[d].marker),p[d].marker.setIcon({path:google.maps.SymbolPath.BACKWARD_CLOSED_ARROW,scale:6}),b(p[d].marker)):(q[d].close(),p[d].marker.setIcon(null))},a.click=function(b){var c=a.places().indexOf(b),d=b.name;a.places()[c].clicked(!b.clicked()),a.infoWindows(c,d)},a.menuHide=function(){$(".item").toggleClass("to-the-left")}}function d(){var a=this;a.search=ko.observable("")}var e,f="AIzaSyCkcvMu_0Ar7_Xv3R3MB6-Ffp_Gxq9Di9s",g={lat:21.469324,lng:-157.96181},h=[],j=[],k=["rainbow","big wave","fresh","jawaiian","germaine","uahi","sweet","boots"],l=[],m={},n=0,o={"Jawaiian Irie Jerk":"1137 11th Ave, Honolulu, HI 96816, USA","Uahi Island Grill":"131 Hekili St, Kailua, HI 96734, USA","Rainbow Drive-In":"3308 Kanaina Ave, Honolulu, HI 96815, USA","Big Wave Shrimp Truck":"66-521 Kamehameha Hwy, Haleiwa, HI 96712, USA","Germaine's Luau":"91-119 Olai St, Kapolei, HI 96707, USA","Poke Stop":"95-1840 Meheula Parkway, Mililiani, HI 96789, USA","Opal Thai Food":"66-197 C Kamehameha Hwy, Haleiwa, HI 96712, USA","Mike's Huli Huli Chicken":"47-525 Kamehameha Hwy, Kaneohe, HI 96744, USA"},p={},q={};a();var r=function(a,c){this.name=c,this.lat=a.lat,this.lng=a.lng,this.marker=new google.maps.Marker({map:e,position:a});var d=new google.maps.InfoWindow({content:"<div>FourSquare Content has failed to load...</div>",minWidth:300});q[c]=d,this.marker.addListener("click",function(a,d){return function(){null===p[c].marker.getIcon()?(d.open(e,a),p[c].marker.setIcon({path:google.maps.SymbolPath.BACKWARD_CLOSED_ARROW,scale:6}),b(a)):(d.close(e,a),p[c].marker.setIcon(null)),u.placesView.click(m[c])}}(this.marker,d))},s={setup:{url:"https://api.foursquare.com/v2/venues/search",id:"?client_id=SBXOTOYRD4VY5FTYGPFR13YJNHA3BFDQTEA2C5XQDJQMEO31",secret:"&client_secret=OA1T4POMTXRWJAJ01E4NLRLZ0RQIXF2G0RIGRQCS3UVCGTVU",version:"&v=20151122"},query:function(a,b,c){var d="&ll="+a.lat+","+a.lng,e="&query="+b,f=this.setup.url+this.setup.id+this.setup.secret+this.setup.version+d+e;!function(a,b){$.getJSON(f,function(c){var d=c.response.venues[0].url,e=c.response.venues[0].contact.formattedPhone,f=c.response.venues[0].name;q[a].setContent(s.buildContent(f,b,e,d))})}(b,c)},buildContent:function(a,b,c,d){if(null!=a){var e="<p>Address: "+b+"</p>",f='<a href="'+d+'">'+d+"</a>";null==d&&(d="No website listed",f="No website listed"),null==c&&(c="No phone number listed");var g="<p>Phone: "+c+"</p>",h="<p>Website: "+f+"</p>",i="<div><h1>"+a+"</h1>"+e+g+h+"</div>";return i}var j="<div><h1>Foursquare has encountered an error displaying information for this location.</h1></div>";return j},init:function(){for(var a in o)s.query(g,a,o[a])}},t={handleDefaultLoc:function(a){var b="https://maps.googleapis.com/maps/api/geocode/json?address=",c="&key="+f,d=[];for(var e in o){j.push(e),n++;var g=o[e],h=b+g+c;!function(a){$.getJSON(h,function(b){var c={};if("OK"==b.status){var e=b.results[0].geometry.location;c.name=a,c.lat=e.lat,c.lng=e.lng,c.addr=b.results[0].formatted_address;var f=new r({lat:c.lat,lng:c.lng},a);p[a]=f,d.push(c)}else console.log("error")})}(e)}return d},buildDefaultLoc:function(){for(i=0;i<n;i++){var a={};a.name=j[i],a.type="restaurant",a.description=k[i],a.clicked=ko.observable(!1),a.match=ko.observable(!0),l.push(a),m[a.name]=a}},init:function(){h=this.handleDefaultLoc(o),this.buildDefaultLoc()}};t.init();var u={placesView:new c,searchView:new d,init:function(){ko.applyBindings(u)},compareSearch:function(a){var b=u.searchView.search(),c=u.placesView.places()[a].name,d=c.toLowerCase(),f=b.toLowerCase();return d.indexOf(f)>-1?(u.placesView.places()[a].match(!0),null!=p[c]&&p[c].marker.setMap(e)):0===b.length?(u.placesView.places()[a].match(!0),null!=p[c]&&p[c].marker.setMap(e)):(u.placesView.places()[a].match(!1),null!=p[c]&&p[c].marker.setMap(null)),u.placesView.places()[a].match()}};u.init(),s.init()}